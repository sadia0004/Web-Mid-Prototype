<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Landlord Schedule Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .background-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
      filter: brightness(0.5);
    }
    .fade-in {
      animation: fadeIn 0.7s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="relative min-h-screen">
  <video autoplay loop muted class="background-video">
    <source src="image/vedio2.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <main class="grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-6xl mx-auto px-4 py-10 backdrop-blur-md  rounded-xl shadow-2xl">
    <!-- Schedule Form -->
    <div class="bg-indigo-300 shadow-lg rounded-3xl p-8 hover:shadow-blue-300  transition duration-500">
      <h2 class="text-3xl font-bold text-center text-blue-700 mb-8 fade-in">📌 Schedule for Tenants</h2>
      <form id="scheduleForm" class="space-y-6">
        <div>
          <label class="block text-gray-700 font-medium mb-1">Select Tenant(s)</label>
          <div id="checkboxContainer" class="grid grid-cols-2 sm:grid-cols-3 gap-2"></div>
          <label class="inline-flex items-center mt-2">
            <input type="checkbox" id="selectAllCheckbox" class="mr-2">
            <span>Select All</span>
          </label>
        </div>

        <div>
          <label for="meetingType" class="block text-gray-700 font-medium mb-1">Meeting Type</label>
          <select id="meetingType" class="w-full border border-gray-300 p-2 rounded">
            <option value="in-person">In-Person</option>
            <option value="online">Online</option>
          </select>
        </div>

        <div id="linkField" class="hidden">
          <label for="meetingLink" class="block text-gray-700 font-medium mb-1">Meeting Link</label>
          <input type="url" id="meetingLink" class="w-full border border-gray-300 p-2 rounded" placeholder="https://meet.example.com/" disabled />
        </div>

        <div>
          <label for="description" class="block text-gray-700 font-medium mb-1">Event Description</label>
          <textarea id="description" rows="3" class="w-full border border-gray-300 p-2 rounded" placeholder="e.g., Monthly meeting"></textarea>
        </div>

        <div class="flex gap-4">
          <div class="w-1/2">
            <label for="date" class="block text-gray-700 font-medium mb-1">Date</label>
            <input type="date" id="date" class="w-full border border-gray-300 p-2 rounded" />
          </div>
          <div class="w-1/2">
            <label for="time" class="block text-gray-700 font-medium mb-1">Time</label>
            <input type="time" id="time" class="w-full border border-gray-300 p-2 rounded" />
          </div>
        </div>

        <div class="flex justify-end mt-6">
          <button type="submit" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-2 rounded hover:scale-105 transform transition">Send Schedule</button>
        </div>
      </form>
    </div>

    <!-- Schedule History -->
    <div class="bg-indigo-300 shadow-lg rounded-3xl p-8 hover:shadow-purple-300 transition duration-500">
      <h2 class="text-2xl font-bold text-center text-gray-700 mb-6">📖 Schedule Records</h2>
      <div class="mb-6">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">📅 Recent Schedules</h3>
        <ul id="recentSchedules" class="space-y-3"></ul>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">📚 Older History</h3>
        <ul id="historySchedules" class="space-y-3"></ul>
      </div>
    </div>
  </main>

  <script>
    const checkboxContainer = document.getElementById("checkboxContainer");
    const meetingType = document.getElementById("meetingType");
    const linkField = document.getElementById("linkField");
    const meetingLink = document.getElementById("meetingLink");
    const selectAllCheckbox = document.getElementById("selectAllCheckbox");
    const recentList = document.getElementById("recentSchedules");
    const historyList = document.getElementById("historySchedules");
    const FIXED_MEETING_LINK = "https://meet.google.com/fixed-meeting";

    const tenantNames = [
      "Tasdik Rayet", "Sadia Ahmed", "Nahid Islam", "Rafiul Kabir", "Jannat Nahar",
      "Nusrat Rumi", "Shafin Rahman", "Tanvir Hasan", "Ayesha Siddika", "Arafat Hossain",
      "Mahi Chowdhury", "Munira Rahman", "Bashir Ahmed"
    ];

    function renderScheduleHistory() {
      const history = JSON.parse(localStorage.getItem("sentSchedules")) || [];
      recentList.innerHTML = "";
      historyList.innerHTML = "";

      history.forEach((item, index) => {
        const li = document.createElement("li");
        li.className = "border rounded-lg p-4 shadow flex flex-col relative bg-gray-50 hover:bg-gray-100 transition";
        li.innerHTML = `
          <strong class="text-blue-600">${item.tenant}</strong>
          <p class="text-sm text-gray-600">${item.date} at ${item.time}</p>
          <p class="text-gray-800 mt-1">📋 ${item.description}</p>
          ${item.meetingType === 'online' ? `<p class='text-sm text-blue-500'><a href='${item.link}' target='_blank'>Join Link</a></p>` : ''}
          <button onclick="deleteSchedule(${index})" class="absolute top-2 right-2 text-red-500 text-sm hover:text-red-700 transition">❌</button>
        `;

        if (index < 3) {
          recentList.appendChild(li);
        } else {
          historyList.appendChild(li);
        }
      });
    }

    function deleteSchedule(index) {
      const history = JSON.parse(localStorage.getItem("sentSchedules")) || [];
      history.splice(index, 1);
      localStorage.setItem("sentSchedules", JSON.stringify(history));
      renderScheduleHistory();
    }

    tenantNames.forEach(name => {
      const label = document.createElement("label");
      label.className = "inline-flex items-center";
      label.innerHTML = `<input type="checkbox" class="tenantCheckbox mr-2" value="${name}"> ${name}`;
      checkboxContainer.appendChild(label);
    });

    selectAllCheckbox.addEventListener("change", function () {
      document.querySelectorAll(".tenantCheckbox").forEach(cb => cb.checked = this.checked);
    });

    meetingType.addEventListener("change", () => {
      const isOnline = meetingType.value === "online";
      linkField.classList.toggle("hidden", !isOnline);
      meetingLink.disabled = !isOnline;
      meetingLink.value = isOnline ? FIXED_MEETING_LINK : "";
    });

    document.getElementById("scheduleForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const selected = Array.from(document.querySelectorAll(".tenantCheckbox:checked")).map(cb => cb.value);
      const description = document.getElementById("description").value;
      const date = document.getElementById("date").value;
      const time = document.getElementById("time").value;
      const link = meetingLink.value;
      const type = meetingType.value;

      if (selected.length === 0) {
        alert("Please select at least one tenant.");
        return;
      }

      const allSchedules = JSON.parse(localStorage.getItem("sentSchedules")) || [];

      selected.forEach(name => {
        allSchedules.unshift({
          tenant: name,
          meetingType: type,
          description,
          date,
          time,
          link: type === "online" ? link : ""
        });
      });

      localStorage.setItem("sentSchedules", JSON.stringify(allSchedules));
      renderScheduleHistory();

      alert("Schedule sent successfully!");
      this.reset();
      linkField.classList.add("hidden");
      meetingLink.value = "";
      document.querySelectorAll(".tenantCheckbox").forEach(cb => cb.checked = false);
      selectAllCheckbox.checked = false;
    });

    renderScheduleHistory();
  </script>
</body>
</html>
